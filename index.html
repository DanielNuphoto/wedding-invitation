<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é¡æœ±åºœå›å®´å–œå¸–</title>
  <meta property="og:title" content="é¡æœ±åºœå›å®´å–œå¸–" />
  <meta property="og:description" content="é‚€è«‹å¤§å®¶ä¸€èµ·ä¾†è¦‹è­‰æˆ‘å€‘çš„å¹¸ç¦æ™‚åˆ»" />
  <meta property="og:image" content="https://danielnuphoto.github.io/wedding-invitation/image.jpg" >
  <meta property="og:image:width" content="720" >
  <meta property="og:image:height" content="540" >
  <link rel="icon" href="favicon.ico">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <style>
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      background: #5a7d9a; /* è«è˜­è¿ªè— */
      margin: 0;
      font-family: sans-serif;
      position: relative;
    }

    .instruction {
      width: 100%;
      position: absolute;
      bottom: calc(100% + 10px);
      font-size: 24px;
      color: #ffffff;
      text-align: center;
      transition: font-size 1s ease, opacity 1s ease;
      opacity: 1;
      transform-origin: top center;
    }

    .instruction.shrink {
      font-size: 20px;
      opacity: 0.7;
    }

    .card-container {
      position: relative;
      width: 50vw;
      aspect-ratio: 4/3;
      perspective: 1000px;
      z-index: 1;
    }

    @media (max-aspect-ratio: 1/1) {
      .card-container {
        width: 90vw;
      }
    }

    .card {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.8s;
      cursor: pointer;
      transform: rotateY(0deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .front {
      background: #000;
    }

    .back {
      transform: rotateY(180deg);
      background: #fff;
    }

    video, img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .btns {
      display: flex;
      gap: 20px;
    }

    .btn {
      margin-top: 20px;
      padding: 12px 36px;
      font-size: 24px;
      border: 2px solid #6c8e7c;
      border-radius: 999px;
      background: #6c8e7c;
      color: #fff;
      cursor: pointer;
      transition: transform 0.3s ease, opacity 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .fade {
      opacity: 0.8;
    }

    .btn-icon {
      margin-top: 20px;
      width: 63px;
      height: 63px;
      border: 2px solid #6c8e7c;
      border-radius: 999px;
      background: #6c8e7c;
      color: #fff;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .btn-icon div {
      width: 36px;
      height: 36px;
      font-size: 36px;
    }

    @media (min-width: 992px) {
      .btn:hover, .btn-icon:hover {
        background: #749d87;
        border: 2px solid #749d87;
      }
    }

    .hidden {
      display: none;
    }

    @keyframes breathe {
      0% { transform: scale(1.0); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1.0); }
    }

    .breathe {
      animation: breathe 1.2s infinite ease-in-out;
    }
  </style>
</head>
<body>
  <div class="card-container">
    <div class="instruction" id="instruction">é»æ“Šæˆ–æ»‘å‹•å¡ç‰‡å³å¯ç¿»é¢</div>
    <div class="card" id="flipCard">
      <div class="card-face front">
        <video src="video.mp4?ver=2" autoplay loop muted playsinline poster="image.png?ver=2"></video>
      </div>
      <div class="card-face back">
        <video src="video-back.mp4?ver=3" autoplay loop muted playsinline poster="image-back.png?ver=2"></video>
      </div>
    </div>
  </div>
  <div class="btns">
    <button id="audioRestartBtn" class="btn-icon hidden">
      <div class="material-symbols-outlined">
        play_circle
      </div>
    </button>
    <button id="audioToggleBtn" class="btn-icon hidden">
      <div id="audioToggleBtnInner" class="material-symbols-outlined">
        play_arrow
      </div>
    </button>
    <button id="audioSoundBtn" class="btn breathe">ğŸ”Š é–‹å•Ÿè²éŸ³</button>
  </div>
  <button id="mapBtn" class="btn breathe">ğŸ“ æŸ¥çœ‹åœ°å€</button>

  <audio id="audioTrack" src="audio.m4a?ver=2" loop></audio>

  <script>
  const card = document.getElementById('flipCard');
  const audioTrack = document.getElementById('audioTrack');
  const audioRestartBtn = document.getElementById('audioRestartBtn');
  const audioToggleBtn = document.getElementById('audioToggleBtn');
  const audioToggleBtnInner = document.getElementById('audioToggleBtnInner');
  const audioSoundBtn = document.getElementById('audioSoundBtn');
  const mapBtn = document.getElementById('mapBtn');
  const instruction = document.getElementById('instruction');
  let startX = 0;
  let rotation = 0;
  let isDragging = false;
  let dragHandled = false;
  let initial = true;

  setTimeout(() => {
    instruction.classList.add('shrink');
  }, 3000);

  card.addEventListener('click', () => {
    if (dragHandled) {
      dragHandled = false;
      return;
    }
    rotation += 180;
    card.style.transform = `rotateY(${rotation}deg)`;
  });

  function handleDragStart(e) {
    isDragging = true;
    dragHandled = false;
    startX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
  }

  function handleDragEnd(e) {
    if (!isDragging) return;
    isDragging = false;
    let endX = e.type.includes('touch') ? e.changedTouches[0].clientX : e.clientX;
    if (Math.abs(endX - startX) > 50) {
      dragHandled = true;
      if (endX < startX) {
        rotation -= 180;
      } else {
        rotation += 180;
      }
      card.style.transform = `rotateY(${rotation}deg)`;
    }
  }

  document.body.addEventListener('touchstart', handleDragStart);
  document.body.addEventListener('touchend', handleDragEnd);
  document.body.addEventListener('mousedown', handleDragStart);
  document.body.addEventListener('mouseup', handleDragEnd);

  audioSoundBtn.addEventListener('click', () => {
    if (initial) {
      initial = false;
      audioRestartBtn.classList.remove('hidden')
      audioToggleBtn.classList.remove('hidden')
      audioTrack.currentTime = 0;
      audioTrack.play();
      audioToggleBtnInner.textContent = 'pause';
      audioSoundBtn.classList.remove('breathe')
      audioSoundBtn.classList.add('fade')
      audioSoundBtn.textContent = 'ğŸ”‡ é—œé–‰è²éŸ³'
    } else {
      audioTrack.muted = !audioTrack.muted
      audioSoundBtn.classList.toggle('fade')
      audioSoundBtn.classList.toggle('breathe')
      if (audioTrack.muted) {
        audioSoundBtn.textContent = 'ğŸ”Š é–‹å•Ÿè²éŸ³'
      } else {
        audioSoundBtn.textContent = 'ğŸ”‡ é—œé–‰è²éŸ³'
      }
    }
  });

  audioRestartBtn.addEventListener('click', () => {
    audioTrack.currentTime = 0;
    audioTrack.play();
    audioToggleBtnInner.textContent = 'pause';
  });

  audioToggleBtn.addEventListener('click', () => {
    if (audioTrack.paused) {
      audioTrack.play();
      audioToggleBtnInner.textContent = 'pause';
    } else {
      audioTrack.pause();
      audioToggleBtnInner.textContent = 'play_arrow';
    }
  });

  mapBtn.addEventListener('click', () => {
    window.open('https://www.google.com/maps/dir//708å°å—å¸‚å®‰å¹³å€åŸå¹³è·¯1è™Ÿ/@22.9918224,120.069466,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x346dd8acbf1b4465:0xf4ab14aaf3caa61c!2m2!1d120.1518676!2d22.9918437?entry=ttu', '_blank');
  });
  </script>
</body>
</html>
