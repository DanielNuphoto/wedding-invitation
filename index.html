<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>È°èÊú±Â∫úÂõçÂÆ¥ÂñúÂ∏ñ</title>
  <meta property="og:title" content="È°èÊú±Â∫úÂõçÂÆ¥ÂñúÂ∏ñ" />
  <meta property="og:description" content="ÈÇÄË´ãÂ§ßÂÆ∂‰∏ÄËµ∑‰æÜË¶ãË≠âÊàëÂÄëÁöÑÂπ∏Á¶èÊôÇÂàª" />
  <meta property="og:image" content="https://danielnuphoto.github.io/wedding-invitation/image.jpg" >
  <meta property="og:image:width" content="720" >
  <meta property="og:image:height" content="540" >
  <link rel="icon" href="favicon.ico">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <style>
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #5a7d9a; /* Ëé´Ëò≠Ëø™Ëóç */
    }

    .container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 20px;
      overflow: hidden;
      margin: 0;
      font-family: sans-serif;
      position: relative;
      width: 100dvw;
      height: 100dvh;
    }

    .instruction {
      width: 100%;
      position: absolute;
      bottom: calc(100% + 10px);
      font-size: 24px;
      color: #ffffff;
      text-align: center;
      transition: font-size 1s ease, opacity 1s ease;
      opacity: 1;
      transform-origin: top center;
    }

    .instruction.shrink {
      font-size: 20px;
      opacity: 0.7;
    }

    .card-container {
      position: relative;
      width: 50dvw;
      aspect-ratio: 4/3;
      perspective: 1000px;
      z-index: 1;
    }

    @media (max-width: 992px) {
      .card-container {
        width: 90dvw;
      }
    }

    .card {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.8s;
      cursor: pointer;
      transform: rotateY(0deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .front {
      background: #000;
    }

    .back {
      transform: rotateY(180deg);
      background: #fff;
    }

    video, img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .controls-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0;
    }

    .btns {
      display: flex;
      flex-wrap: nowrap;
      transition: all 0.5s ease;
    }

    .btn {
      margin-top: 20px;
      padding: 12px 36px;
      font-size: 24px;
      border-radius: 999px;
      background: #6c8e7c;
      color: #fff;
      cursor: pointer;
      transition: all 0.5s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      white-space: nowrap;
    }

    .fade {
      opacity: 0.8;
    }

    button {
      padding: 0;
      border: none;
    }

    .btn-icon {
      margin-top: 20px;
      margin-right: 0;
      width: 0;
      height: 63px;
      border-radius: 999px;
      background: #6c8e7c;
      color: #fff;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0);
      transition: opacity 0.5s ease, transform 0.5s ease, width 0.5s ease, height 0.5s ease, margin 0.5s ease, border-width 0.5s ease, box-shadow 0.5s ease;
      opacity: 0;
      transform: scale(0.5) rotateY(-180deg);
      overflow: hidden;
      pointer-events: none;
    }

    .btn-icon.visible {
      width: 63px;
      margin-right: 20px;
      opacity: 1;
      transform: scale(1) rotateY(0deg);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      pointer-events: auto;
    }

    .btn-icon div {
      width: 36px;
      height: 36px;
      font-size: 36px;
    }

    @media (min-width: 992px) {
      .btn:hover, .btn-icon:hover {
        background: #749d87;
      }
    }

    .hidden {
      display: none;
    }

    @keyframes breathe {
      0% { transform: scale(1.0); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1.0); }
    }

    .breathe {
      /* animation: breathe 1.2s infinite ease-in-out; */
    }

    .toast {
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: rgba(0, 0, 0, 0.5);
      color: #fff;
      padding: 12px 24px;
      border-radius: 16px;
      font-size: 16px;
      opacity: 0;
      transition: opacity 0.2s ease, transform 0.2s ease;
      pointer-events: none;
      z-index: 1000;
      white-space: nowrap;
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    /* Mobile Portrait - Reduce sizes for better balance */
    @media (max-aspect-ratio: 1/1) and (max-width: 768px) {
      .instruction {
        font-size: 18px;
        bottom: calc(100% + 5px);
      }

      .instruction.shrink {
        font-size: 16px;
      }

      .btn {
        margin-top: 12px;
        padding: 10px 24px;
        font-size: 18px;
      }

      .btn-icon {
        margin-top: 12px;
        height: 50px;
      }

      .btn-icon.visible {
        width: 50px;
        margin-right: 12px;
      }

      .btn-icon div {
        width: 28px;
        height: 28px;
        font-size: 28px;
      }

      .toast {
        bottom: 60px;
        font-size: 14px;
        padding: 10px 20px;
      }
    }

    /* Landscape Mode - Horizontal layout */
    @media (max-height: 600px) and (orientation: landscape) {
      .container {
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 20px;
        box-sizing: border-box;
      }

      .card-container {
        width: auto;
        height: 80dvh;
        aspect-ratio: 4/3;
        flex-shrink: 0;
      }

      .instruction {
        font-size: 18px;
        bottom: calc(100% + 6px);
      }

      .instruction.shrink {
        font-size: 16px;
      }

      .controls-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 14px;
        flex-shrink: 0;
      }

      .btns {
        margin-top: 0;
      }

      .btn {
        margin-top: 0;
        padding: 10px 24px;
        font-size: 18px;
      }

      .btn-icon {
        margin-top: 0;
        height: 48px;
      }

      .btn-icon.visible {
        width: 48px;
        margin-right: 12px;
      }

      .btn-icon div {
        width: 28px;
        height: 28px;
        font-size: 28px;
      }

      .toast {
        bottom: 30px;
        font-size: 14px;
        padding: 10px 20px;
      }
    }

    /* Extra small landscape devices */
    @media (max-height: 450px) and (orientation: landscape) {
      .card-container {
        height: 80dvh;
      }

      .instruction {
        font-size: 14px;
      }

      .instruction.shrink {
        font-size: 12px;
      }

      .btn {
        padding: 8px 18px;
        font-size: 15px;
      }

      .btn-icon {
        height: 42px;
      }

      .btn-icon.visible {
        width: 42px;
        margin-right: 10px;
      }

      .btn-icon div {
        width: 24px;
        height: 24px;
        font-size: 24px;
      }

      .controls-container {
        gap: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card-container">
      <div class="instruction" id="instruction">ÈªûÊìäÊàñÊªëÂãïÂç°ÁâáÂç≥ÂèØÁøªÈù¢</div>
      <div class="card" id="flipCard">
        <div class="card-face front">
          <video src="video.mp4?ver=2" autoplay loop muted playsinline poster="image.png?ver=2"></video>
        </div>
        <div class="card-face back">
          <video src="video-back.mp4?ver=3" autoplay loop muted playsinline poster="image-back.png?ver=2"></video>
        </div>
      </div>
    </div>
    <div class="controls-container">
      <div class="btns">
        <button id="audioRestartBtn" class="btn-icon" title="ÈáçÊñ∞Êí≠Êîæ">
          <div class="material-symbols-outlined">
            play_circle
          </div>
        </button>
        <button id="audioToggleBtn" class="btn-icon" title="Êí≠Êîæ">
          <div id="audioToggleBtnInner" class="material-symbols-outlined">
            play_arrow
          </div>
        </button>
        <button id="audioSoundBtn" class="btn breathe">üîä ÈñãÂïüËÅ≤Èü≥</button>
      </div>
      <button id="mapBtn" class="btn breathe">üìç Êü•ÁúãÂú∞ÂùÄ</button>
    </div>
  </div>
  <div id="toast" class="toast"></div>

  <audio id="audioTrack" src="audio.m4a?ver=2" loop></audio>

  <script>
  const card = document.getElementById('flipCard');
  const audioTrack = document.getElementById('audioTrack');
  const audioRestartBtn = document.getElementById('audioRestartBtn');
  const audioToggleBtn = document.getElementById('audioToggleBtn');
  const audioToggleBtnInner = document.getElementById('audioToggleBtnInner');
  const audioSoundBtn = document.getElementById('audioSoundBtn');
  const mapBtn = document.getElementById('mapBtn');
  const instruction = document.getElementById('instruction');
  const toast = document.getElementById('toast');
  let startX = 0;
  let rotation = 0;
  let isDragging = false;
  let dragHandled = false;
  let initial = true;
  let toastTimeout;

  function showToast(message) {
    toast.textContent = message;
    toast.classList.add('show');
    
    clearTimeout(toastTimeout);
    toastTimeout = setTimeout(() => {
      toast.classList.remove('show');
    }, 1000);
  }

  setTimeout(() => {
    instruction.classList.add('shrink');
  }, 3000);

  card.addEventListener('click', () => {
    if (dragHandled) {
      dragHandled = false;
      return;
    }
    rotation += 180;
    card.style.transform = `rotateY(${rotation}deg)`;
  });

  function handleDragStart(e) {
    isDragging = true;
    dragHandled = false;
    startX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
  }

  function handleDragEnd(e) {
    if (!isDragging) return;
    isDragging = false;
    let endX = e.type.includes('touch') ? e.changedTouches[0].clientX : e.clientX;
    if (Math.abs(endX - startX) > 50) {
      dragHandled = true;
      if (endX < startX) {
        rotation -= 180;
      } else {
        rotation += 180;
      }
      card.style.transform = `rotateY(${rotation}deg)`;
    }
  }

  document.body.addEventListener('touchstart', handleDragStart);
  document.body.addEventListener('touchend', handleDragEnd);
  document.body.addEventListener('mousedown', handleDragStart);
  document.body.addEventListener('mouseup', handleDragEnd);

  audioSoundBtn.addEventListener('click', () => {
    if (initial) {
      initial = false;
      audioRestartBtn.classList.add('visible')
      audioToggleBtn.classList.add('visible')
      audioTrack.currentTime = 0;
      audioTrack.play();
      audioToggleBtnInner.textContent = 'pause';
      audioToggleBtn.title = 'Êö´ÂÅú';
      audioSoundBtn.classList.remove('breathe')
      audioSoundBtn.classList.add('fade')
      audioSoundBtn.textContent = 'üîá ÈóúÈñâËÅ≤Èü≥'
    } else {
      audioTrack.muted = !audioTrack.muted
      audioSoundBtn.classList.toggle('fade')
      audioSoundBtn.classList.toggle('breathe')
      if (audioTrack.muted) {
        audioSoundBtn.textContent = 'üîä ÈñãÂïüËÅ≤Èü≥'
      } else {
        audioSoundBtn.textContent = 'üîá ÈóúÈñâËÅ≤Èü≥'
      }
    }
  });

  audioRestartBtn.addEventListener('click', () => {
    audioTrack.currentTime = 0;
    audioTrack.play();
    audioToggleBtnInner.textContent = 'pause';
    audioToggleBtn.title = 'Êö´ÂÅú';
    showToast('ÈáçÊñ∞Êí≠Êîæ');
  });

  audioToggleBtn.addEventListener('click', () => {
    if (audioTrack.paused) {
      audioTrack.play();
      audioToggleBtnInner.textContent = 'pause';
      audioToggleBtn.title = 'Êö´ÂÅú';
      showToast('ÁπºÁ∫åÊí≠Êîæ');
    } else {
      audioTrack.pause();
      audioToggleBtnInner.textContent = 'play_arrow';
      audioToggleBtn.title = 'Êí≠Êîæ';
      showToast('Â∑≤Êö´ÂÅú');
    }
  });

  mapBtn.addEventListener('click', () => {
    window.open('https://www.google.com/maps/dir//708Âè∞ÂçóÂ∏ÇÂÆâÂπ≥ÂçÄÂüéÂπ≥Ë∑Ø1Ëôü/@22.9918224,120.069466,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x346dd8acbf1b4465:0xf4ab14aaf3caa61c!2m2!1d120.1518676!2d22.9918437?entry=ttu', '_blank');
  });
  </script>
</body>
</html>
